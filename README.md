# Telegram Channel Monitor

Бот для мониторинга объявлений о продаже ПК(Я его для этого использую) в Telegram-каналах. Автоматически проверяет указанные каналы каждые 5 минут и пересылает найденные объявления в указанную группу.

[![Python Version](https://img.shields.io/badge/python-3.7+-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](https://opensource.org/licenses/MIT)

## Особенности

- Использует реальный аккаунт Telegram
- Мониторит указанные каналы на наличие объявлений о продаже ПК
- Автоматически пересылает найденные объявления в указанную группу
- При запуске начинает мониторить ТОЛЬКО НОВЫЕ сообщения
- Не проверяет старые сообщения из истории канала
- Работает в фоновом режиме, пока не будет остановлен

## Требования

- Python 3.7 или выше
- Telegram аккаунт
- API ID и API Hash от Telegram (получить на https://my.telegram.org/apps)

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/yourusername/telegram-pc-monitor.git
   cd telegram-pc-monitor
   ```

2. Создайте виртуальное окружение и активируйте его:
   ```bash
   python -m venv venv
   # Windows:
   venv\Scripts\activate
   # Linux/Mac:
   source venv/bin/activate
   ```

3. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

## Настройка

1. Получите `API_ID` и `API_HASH` на сайте https://my.telegram.org/apps
2. Скопируйте файл `.env.example` в `.env`:
   ```bash
   copy .env.example .env
   ```
3. Заполните данные в файле `.env`:
   - `API_ID` - ваш API ID
   - `API_HASH` - ваш API Hash
   - `PHONE` - ваш номер телефона в международном формате

4. Добавьте каналы для мониторинга в файл `config.py` в список `CHANNELS`. Можно использовать любой из этих форматов:
   ```python
   CHANNELS = [
       'https://t.me/channel_name',     # Полная ссылка на канал
       '@channel_name',                 # Короткое имя канала
       '-1001234567890',               # ID канала
       'Точное название канала'         # Название канала как оно отображается
   ]
   ```
   Например, для канала "KTroom | Уцінені товари" можно использовать:
   ```python
   CHANNELS = [
       'KTroom | Уцінені товари'       # Точное название канала
       # или
       'https://t.me/ktroom'           # Ссылка на канал
       # или
       '@ktroom'                       # Короткое имя
   ]
   ```
   Важно: при использовании названия канала оно должно точно совпадать с тем, как канал отображается в Telegram!

## Запуск

1. Сначала убедитесь, что вы установили Python и зависимости:
   ```bash
   pip install -r requirements.txt
   ```

2. Создайте файл .env из примера:
   ```bash
   copy .env.example .env
   ```

3. Заполните файл .env вашими данными:
   - Получите API_ID и API_HASH на https://my.telegram.org/apps
   - Введите ваш номер телефона в формате +xxx-xxx-xxx-xxx

4. В файле config.py добавьте нужные каналы в список CHANNELS

5. Запустите бот:
   ```bash
   python monitor.py
   ```

При первом запуске:
1. Бот попросит ввести ваш номер телефона
2. Затем придет код подтверждения в Telegram - введите его
3. После этого бот начнет мониторинг каналов

Бот создаст файлы:
- monitor_session.session - данные авторизации
- last_messages.json - информация об обработанных сообщениях
- last_run.json - время последнего запуска

При следующих запусках авторизация уже не потребуется, просто запускайте:
```bash
python monitor.py
```

## Как это работает

1. При первом запуске бот начинает мониторинг с текущего момента
2. При каждом выключении сохраняет время последней проверки
3. При следующем запуске:
   - Проверяет все сообщения с момента последнего выключения
   - Находит и пересылает пропущенные объявления с ключевыми словами
   - Продолжает мониторить новые сообщения
4. Благодаря этому:
   - Не теряются объявления, появившиеся когда бот был выключен
   - Можно спокойно выключать бота на ночь или когда он не нужен
   - При включении он проверит все пропущенные сообщения
